!function(a){function b(b,c){this.mainNavigation=a(b),this.settings=a.extend({},c),this.init()}b.prototype.init=function(){var b=this;this.navigationList=a(b.mainNavigation).find(".navigationList"),this.mainMenu=a(this.navigationList).find(" > li"),this.mainMenuAnchor=a(this.mainMenu).find(" > h2 > a"),this.subMenuBlock=a(this.mainMenu).find(".dropBlock"),this.bindEvents(),this.setMenuPosition()},b.prototype.setMenuPosition=function(){var b=this,c=a(window).width();c>960?(a(".dropBlock").find(".menuContent > ul > li").css("float","left"),b.mainMenuAnchor.each(function(){var d=a(this),e=d.position().left,f=e+d.width(),g=d.parents("li").find(".dropBlock").outerWidth(),h=b.settings.layoutWidth?b.settings.layoutWidth:c;h>=e+g?d.parents("li").find(".dropBlock").css("left","auto"):f>=g?d.parents("li").find(".dropBlock").css("left",f-g):d.parents("li").find(".dropBlock").css("left",(h-g)/2)})):(a(".dropBlock").css("left","auto"),a(".dropBlock").find(".menuContent > ul > li").css("float","none"))},b.prototype.eventFocus=function(){var b=this;b.mainMenuAnchor.on("focus",function(){var c=a(this);b.mainMenuAnchor.removeClass("hover"),c.addClass("hover")})},b.prototype.eventMouseenter=function(){var b=this;b.mainMenuAnchor.on("mouseenter",function(){var c=a(this);b.mainMenuAnchor.removeClass("hover active"),c.addClass("hover active"),b.mainMenuAnchor.parents("li").find(".dropBlock").stop().hide(),c.parents("li").find(".dropBlock").stop().slideDown(),a(window).width()>960&&(a(".showSearch").removeClass("close"),a(".inputDiv").stop().hide(),c.data("oneclick","true")),b.mainMenuAnchor.blur()})},b.prototype.eventMouseleave=function(){var b=this;b.mainMenu.on("mouseleave",function(){var b=a(this);b.find(" > h2 > a").removeClass("hover active"),b.find(".dropBlock").stop().hide(),a(window).width()>960&&b.data("oneclick","false")})},b.prototype.eventClick=function(){var b=this;b.mainMenuAnchor.on("click",function(c){c.preventDefault();var d=a(this);a(window).width()>960&&(a(".showSearch").removeClass("close"),a(".inputDiv").stop().hide()),b.mainMenuAnchor.removeClass("hover active"),d.addClass("hover active"),d.parents("li").find(".dropBlock").length<1?window.location.href=d.attr("href"):"false"==d.data("oneclick")?(b.mainMenuAnchor.each(function(){a(this).hasClass("active")?(a(this).parents("li").find(".dropBlock").stop().slideDown(),a(this).data("oneclick","true")):(a(this).parents("li").find(".dropBlock").stop().hide(),a(this).data("oneclick","false"))}),a(window).width()<=960&&a("html, body").animate({scrollTop:d.offset().top})):window.location.href=d.attr("href")})},b.prototype.eventKeyup=function(){var b=this;b.mainMenuAnchor.on("keyup",function(b){var c=b.which?b.which:b.keyCode;if(27==c){var d=a(this);d.removeClass("active"),d.parents("li").find(".dropBlock").stop().slideUp(),d.data("oneclick","false")}}),b.subMenuBlock.find("li a").on("keyup",function(b){var c=b.which?b.which:b.keyCode;if(27==c){var d=a(this),e=d.parents(".dropBlock"),f=e.parents("li").find(" > h2 > a");d.blur(),f.focus(),f.removeClass("active"),e.stop().slideUp(),f.data("oneclick","false")}})},b.prototype.bindEvents=function(){var b=this;is_touch_device===!0||a(window).width()<=960||(b.eventFocus(),b.eventMouseenter(),b.eventMouseleave(),b.eventKeyup()),b.mainMenuAnchor.data("oneclick","false"),b.eventClick()},a.fn.navigation=function(c){return this.each(function(){var d=a(this);if(!d.data("navigation")){var e=new b(this,c);d.data("navigation",e)}})}}(jQuery),$(document).ready(function(){is_touch_device="ontouchstart"in document.documentElement,$(".mainNavigation").navigation()});